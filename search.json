[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "",
    "text": "Mangrove trees are an important aspect of many coastal ecosystems. Often, these areas are also impacted by hurricanes, therefore it is beneficial to understand how hurricanes damage mangrove trees and how long it takes trees to recover from said damage. Hurricanes impact mangroves through “…three primary mechanisms: wind damage, storm surges, and sediment deposition” (Smith III et al., 2009, p. 24). The wind can damage the trunk, branches and leaves, the storm surges can uproot or knock over the mangrove tree, finally, “…deposited materials interfere with root and soil gas exchange leading to eventual death of the trees (Smith III et al., 2009, p. 24). With knowledge of how hurricanes impact mangroves, we can look towards quantifying the response of mangrove forests to these impacts. To do this, mangroves must be studied over time and at different areas within a hurricane’s impact area. This leads us to the data set used in this project, following Hurricane Andrew in 1992 permanent study plots were established in the Everglades region of southern Florida. More were added later to compare modern observations to historic measurements, in total there are twenty-three plots with data spanning 1992-2011. The goal of this project is to visualize various aspects of how individual mangroves, different mangrove species and the plots overall respond to hurricanes over time."
  },
  {
    "objectID": "index.html#data-sources",
    "href": "index.html#data-sources",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Data Sources",
    "text": "Data Sources\n\nUnited States Geological Survey’s Wetland and Aquatic Research Center\n\nhttps://doi.org/10.5066/P13DONMU\n\nThe hurricaneexposure and hurricaneexposuredata packages\n\nhttps://github.com/geanders/hurricaneexposure\nhttps://github.com/geanders/hurricaneexposuredata\n\nThe spData Package\n\nhttps://cran.r-project.org/package=spData"
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Methods",
    "text": "Methods\nTo begin this project, I loaded all the necessary libraries, listed below, and imported the data sets. I then set up the study area using a bounding box, cropped the us_states data using this bounding box to get a polygon of the study area and filtered the us_states data to just the state of Florida for a scope of reference. For the Everglades Mangrove Data, I removed the “NA” values for DBH, grouped by Plot ID, reformatted the date to be compatible with R, arranged in date order then transformed the dataframe into a spatial object for mapping purposes. I also used the distinct() function to make a list of the 23 plots with their unique IDs, their sitename and their geometry. Finally, I mapped the tracks of the hurricanes that passed through the study area between 1992 and 2011 using the hurricane exposure package. I extracted the point information of the hurricane tracks and converted it to a spatial object. I then cropped this down to Florida and further cropped it to just the study area.\n\nLoad libraries\n\n\nCode\nlibrary(readr)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(drat)\naddRepo(\"geanders\")\nupdate.packages(\"hurricaneexposure\")\nupdate.packages(\"hurricaneexposuredata\")\nlibrary(hurricaneexposure)\nlibrary(hurricaneexposuredata)\nlibrary(sf)\nlibrary(spData)\nlibrary(leaflet)\nlibrary(foreach)\nlibrary(doParallel)\nlibrary(lubridate)\nlibrary(grid)\nlibrary(gtable)\nlibrary(gridExtra)\nlibrary(png)\ninstall.packages(\"kableExtra\")\n\n\n# Downloading packages -------------------------------------------------------\n- Downloading kableExtra from CRAN ...          OK [2 Mb in 0.57s]\n- Downloading svglite from CRAN ...             OK [197.9 Kb in 0.34s]\nSuccessfully downloaded 2 packages in 2.4 seconds.\n\nThe following package(s) will be installed:\n- kableExtra [1.4.0]\n- svglite    [2.1.3]\nThese packages will be installed into \"~/work/final-project-IListon/final-project-IListon/renv/library/linux-ubuntu-jammy/R-4.4/x86_64-pc-linux-gnu\".\n\n# Installing packages --------------------------------------------------------\n- Installing svglite ...                        OK [installed binary and cached in 0.34s]\n- Installing kableExtra ...                     OK [installed binary and cached in 0.53s]\nSuccessfully installed 2 packages in 0.96 seconds.\n\n\nCode\nlibrary(kableExtra)\n\n\n\n\nLoad data\n\n\nCode\ndata(\"us_states\")\ndata(\"hurr_tracks\")\nEVG_raw_data &lt;- read.csv(\"data/Everglades_Mangrove_Vegetation_plot_data.csv\")\n\n\n\n\nClean up data\n\n\nCode\n#create the study area bounding box\nbbox_coords &lt;- c(-81.2133, 25.5831,-80.9134, 25.1589)\n\n#create a polygon from the bounding box\nbbox_polygon &lt;- st_as_sf(st_sfc(st_polygon(list(matrix(c(\n   bbox_coords[1], bbox_coords[2],  \n   bbox_coords[3], bbox_coords[2],\n   bbox_coords[3], bbox_coords[4],  \n   bbox_coords[1], bbox_coords[4],\n   bbox_coords[1], bbox_coords[2]   \n), ncol = 2, byrow = TRUE))), crs = 4269)) #used EPSG 4269 to match us_states \n\n#set the study coordinate reference system\nstudy_crs &lt;- st_crs(bbox_polygon)\n\n#create the study area polygon \nstudy_area &lt;- st_crop(us_states, bbox_polygon)\n\n#filter the \"us_states\" data to just Florida\nFL_state &lt;- filter(us_states, NAME == \"Florida\")\n\n#tidy everglades mangrove data\nEVG_tidy &lt;- EVG_raw_data %&gt;%\n              subset(dbh_cm != \"NA\") %&gt;%\n              group_by(plot_ID) %&gt;%\n              mutate(across(contains(\"date\"), ~ mdy(.))) %&gt;%\n              arrange(., date)\n\n#convert tidies mangrove data into an st object             \nEVG_tidy_spat &lt;- EVG_tidy %&gt;%\n                  st_as_sf(coords = c(\"longitude\", \"latitude\"), \n                           crs = study_crs)\n\n#gather the distinct values of plot_ID, site name and geometry\nEVG_plots &lt;- EVG_tidy_spat %&gt;%\n              distinct(plot_ID, site, geometry)\n\n#map_tracks for the hurricanes passing through the study area \nhurr_paths &lt;- map_tracks(storms = c(\"Andrew-1992\",\"Irene-1999\",\n                                    \"Katrina-2005\"))\n\n#extract the specific point data from the hurr_paths object,\n#convert it into a st object, and crop it to fit the state of Florida\nhurr_paths_spat &lt;- hurr_paths[[\"layers\"]][[2]][[\"data\"]] %&gt;%\n                    st_as_sf(.,coords = c(\"longitude\", \"latitude\"), \n                              crs = study_crs) %&gt;%\n                    st_crop(.,FL_state)\n\n#crop hurr_paths to just the study area\nstudy_area_hurr_paths &lt;- st_crop(hurr_paths_spat, study_area)"
  },
  {
    "objectID": "index.html#map-the-spatial-distribution-of-study-plots",
    "href": "index.html#map-the-spatial-distribution-of-study-plots",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Map the spatial distribution of study plots",
    "text": "Map the spatial distribution of study plots\n\n\nCode\nif (knitr::is_html_output()) {\nplot_dist &lt;- leaflet(EVG_tidy_spat)%&gt;%\n                addTiles()%&gt;%\n                fitBounds(., lng1 = -81.2133, lat1 = 25.5831,\n                          lng2 = -80.9134, lat2 = 25.1589)%&gt;%\n                addMarkers(data = EVG_plots, popup = EVG_plots$site)\nplot_dist\n} else {\n  plot_dist_static &lt;- ggplot()+\n                    geom_sf(data = study_area)+\n                    geom_sf(data = EVG_plots, aes(color = plot_ID))+\n                    theme(axis.text.x = element_text(angle = 270, vjust = 0.5, \n                                                     hjust=1))+\n                    labs(title = \"Study Area with Study Plots\", \n                         color = \"Plot ID\")+\n                    theme(plot.title = element_text(hjust = 0.5))\n  plot_dist_static}"
  },
  {
    "objectID": "index.html#plot-the-path-of-hurricanes-in-the-context-of-the-study-area-and-plots",
    "href": "index.html#plot-the-path-of-hurricanes-in-the-context-of-the-study-area-and-plots",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Plot the path of hurricanes in the context of the study area and plots",
    "text": "Plot the path of hurricanes in the context of the study area and plots\n\n\nCode\n#make a map showing Florida, the study area and the hurricane paths\nstate_view &lt;- ggplot() +\n                geom_sf(data = FL_state) +\n                geom_sf(data = study_area, fill = \"green\")+\n                geom_sf(data = hurr_paths_spat, aes(color = storm_id))+ \n                labs(title = \"Florida with the Study Area and Hurricane Paths\", \n                     color = \"Storm ID\")+\n                theme(plot.title = element_text(hjust = 0.5))\nstate_view\n\n\n\n\n\n\n\n\n\n\n\nCode\n#make a map showing the study area, cropped hurricane paths and study plots  \nstudy_area_view &lt;- ggplot()+\n                    geom_sf(data = study_area)+\n                    geom_sf(data = study_area_hurr_paths, aes(color = storm_id))+\n                    geom_sf(data = EVG_plots, shape = 15)+\n                    theme(axis.text.x = element_text(angle = 270, vjust = 0.5, \n                                                     hjust=1))+\n                    labs(title = \"Study Area with Hurricane Paths and Study Plots\", \n                         color = \"Storm ID\")+\n                    theme(plot.title = element_text(hjust = 0.5))\n\nstudy_area_view"
  },
  {
    "objectID": "index.html#plot-species-make-up-of-each-plot-over-time",
    "href": "index.html#plot-species-make-up-of-each-plot-over-time",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Plot species make up of each plot over time",
    "text": "Plot species make up of each plot over time\n\n\nCode\n#make a cluster and register it for parallel processing\ncl &lt;- makeCluster(4)\nregisterDoParallel(cl)\n\n#factor plots for use in foreach loop\nsites &lt;- factor(EVG_tidy$plot_ID)\n\n#create foreach loop that calculates plot make-up, \n#then makes and saves a bar chart \n#representing the quantity fo each species overtime\nplot_makeup_list &lt;- foreach(i = levels(sites), \n                   .packages = c(\"dplyr\", \"ggplot2\")) %dopar% {\n\n                  plot_makeup &lt;- EVG_tidy %&gt;% \n                                 filter(plot_ID == i) %&gt;%\n                                 group_by(plot_ID, date, scientific_name) %&gt;%\n                                 summarize(individual_count = n(), \n                                           .groups = \"drop\")\n  \n                  bar_chart &lt;- ggplot(data = plot_makeup, \n                                      aes(fill = scientific_name, \n                                          y = individual_count, \n                                          x = date)) +\n                               geom_bar(position = \"fill\", \n                                        stat = \"identity\")+ \n                               labs(x = \"Date\", y = \"Proportion of Species\", \n                                    fill = \"Scientific Name\") +\n                               ggtitle(paste(\"Plot\", i))+\n                               theme(plot.title = element_text(hjust = 0.5))\n  \n                   file_name &lt;- paste(\"plot_\", i, \".png\", sep = \"\")\n  \n                   ggsave(filename = file_name, plot = bar_chart, \n                          width = 10, height = 8, units = \"in\")\n  \n                   return(file_name)}\n\nstopCluster(cl)\n\n#convert saved .png files to graphic objects (grobs) for use with grid.arrange\ngrob_list &lt;- lapply(plot_makeup_list, function(file_name) {\n  img &lt;- readPNG(file_name)        \n  raster_grob &lt;- rasterGrob(img)   \n  return(raster_grob)})\n\n#arrange grobs in a grid and save image \nall_plots &lt;- grid.arrange(grobs = grob_list, ncol = 4, nrow = 6)\n\n\n\n\n\n\n\n\n\nCode\nggsave(filename = \"all_plots.png\", plot = all_plots, \n       width = 20, height = 15, units = \"in\")"
  },
  {
    "objectID": "index.html#find-and-visualize-the-directly-impacted-plotplots",
    "href": "index.html#find-and-visualize-the-directly-impacted-plotplots",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Find and visualize the directly impacted plot/plots",
    "text": "Find and visualize the directly impacted plot/plots\n\nFind the plot/ plots that fall in the direct line of a hurricane\n\n\nCode\n# Transform to a projected coordinate system (NAD83 / UTM Zone 17N)\nEVG_plots_trans &lt;- st_transform(EVG_plots, crs = 32617) \nstudy_area_hurr_paths_trans&lt;- st_transform(study_area_hurr_paths, crs = 32617)\nstudy_area_trans &lt;- st_transform(study_area, crs = 32617) \n\n# Create buffer for EVG_plots and hurr_paths (1 mile = 1609.34 meters)\nEVG_plots_buffer &lt;- st_buffer(EVG_plots_trans, dist = (1609.34*0.5))\nstudy_area_hurr_paths_buffer &lt;- st_buffer(study_area_hurr_paths_trans, \n                                          dist = (1609.34))\n\n# Find the intersection of the buffers\noverlap &lt;- st_intersection(EVG_plots_buffer, study_area_hurr_paths_buffer)\n\noverlap_table&lt;-overlap %&gt;%\n                  st_drop_geometry%&gt;%\n                  kbl() %&gt;%\n                  kable_minimal()\n\noverlap_table\n\n\n\n\n\nplot_ID\nsite\nstorm_id\ndate\n\n\n\n\nBRU\nBroad River\nIrene-1999\n1999-10-15 21:00:00\n\n\nBRM\nBroad River\nKatrina-2005\n2005-08-26 04:45:00\n\n\n\n\n\n\n\nCode\n#Visualize the intersection\nggplot()+\n  geom_sf(data = study_area_trans)+\n  geom_sf(data = study_area_hurr_paths_buffer, aes(color = storm_id))+\n  geom_sf(data = study_area_hurr_paths_trans, aes(color = storm_id))+\n  geom_sf(data = EVG_plots_buffer, aes(fill = site))+\n  geom_sf(data = overlap, aes(fill = site), color= \"yellow\")+\n  labs(title = \"Intersection of Study Plots and Hurricane Paths\",\n       fill = \"Site Name\", color = \"Storm ID\",\n       caption = \"Study Plots have a 1/2 mile Buffer, Hurricane Paths have a 1 mile Buffer\")+\n  theme(plot.title = element_text(hjust = 0.5),\n        plot.caption = element_text(hjust = 0.5),\n        axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=1))\n\n\n\n\n\n\n\n\n\n\n\nPlot the average DBH of each species in the impacted plot/plots over time\n\n\nCode\n#filter the mangrove data based on the overlap results, \n#the first overlap plot is BRU\nplot_BRU &lt;- EVG_tidy_spat %&gt;%\n              filter(plot_ID == \"BRU\") %&gt;%\n              subset(status != \"dead\") %&gt;%\n              group_by(date, scientific_name) %&gt;%\n              mutate(\"avg_species_dbh_cm\" = mean(dbh_cm)) #averaged to minimize \n                                                          #visual noise\n#plot the change in average Diameter at Breast Height (DBH) for each species over time\nggplot(plot_BRU) +\n  geom_point(aes(x = date, y = avg_species_dbh_cm, color = scientific_name)) +\n  geom_line(aes(x = date, y = avg_species_dbh_cm, color = scientific_name, \n                group = scientific_name)) +\n  geom_vline(xintercept = as.Date(\"1999-10-15\"), color = \"gray\", \n             linetype = \"dashed\", linewidth = 1) +\n  annotate(\"text\",x = as.Date(\"1999-10-15\"), y = 0, \n            label = \"Hurricane Irene\", \n            color = \"black\")+\n  labs(title = \"Change in Average DBH per Species in Plot BRU\", \n       x = \"Date\", y = \"Average DBH in cm\", color = \"Scientific Name\")+\n  theme(plot.title = element_text(hjust = 0.5))+\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n#filter the mangrove data based on the overlap results again,\n#the second overlap plot is BRM\nplot_BRM &lt;- EVG_tidy_spat %&gt;%\n               filter(plot_ID == \"BRM\") %&gt;%\n               subset(status != \"dead\") %&gt;%\n               group_by(date, scientific_name) %&gt;%\n               mutate(\"avg_species_dbh_cm\" = mean(dbh_cm))\n\n#plot the change in average DBH for each species over time  \nggplot(plot_BRM) +\n  geom_point(aes(x = date, y = avg_species_dbh_cm, color = scientific_name)) +\n  geom_line(aes(x = date, y = avg_species_dbh_cm, color = scientific_name, \n                group = scientific_name)) +\n   geom_vline(xintercept = as.Date(\"1999-10-15\"), color = \"gray\", \n             linetype = \"dashed\", linewidth = 1) +\n  annotate(\"text\",x = as.Date(\"1999-10-15\"), y = 0, \n            label = \"Hurricane Irene\", \n            color = \"black\")+\n  geom_vline(xintercept = as.Date(\"2005-08-26\"), color = \"gray\", \n             linetype = \"dashed\", linewidth = 1) +\n  annotate(\"text\",x = as.Date(\"2005-08-26\"), y = 0, \n            label = \"Hurricane Katrina\", \n            color = \"black\")+\n  xlim(min(plot_BRM$date), max(plot_BRM$date) + 365) +\n  labs(title = \"Change in Average DBH per Species in Plot BRM\", \n       x = \"Date\", y = \"Average DBH in cm\", color = \"Scientific Name\")+\n  theme(plot.title = element_text(hjust = 0.5))+\n  theme_minimal()"
  },
  {
    "objectID": "index.html#results-text",
    "href": "index.html#results-text",
    "title": "Visualizing the impact of hurricanes on mangroves over time",
    "section": "Results (Text):",
    "text": "Results (Text):\nThrough this project I was able to plot the location of the twenty-three permanent plots in the context of the state of Florida in an interactive map. Using a static map, I visualized the study area within the state of Florida and the various hurricanes that have passed through the area of interest during the period of study. I also made a map of the plots within the study area and the hurricane paths at that scale. Furthermore, I used bar charts that had the proportion of each species observed on each study date to visualize the species make-up of each plot over time. These plots are useful for understanding which species thrive at different hurricane exposure levels and for comparing how the species make-up changes through time. Using a buffer I was able to determine which sites were most directly impacted by the various hurricanes that passed through the study area. The result of this buffer and intersection was the identification of two plots that were directly in a hurricane’s path. Using the average Diameter at Breast Height (DBH) for each species I visualized the change in these trees over time."
  },
  {
    "objectID": "data/Readme.html",
    "href": "data/Readme.html",
    "title": "GEO511_FinalProject",
    "section": "",
    "text": "Place any data needed by your analysis in this folder. Please do not store large files here. Then read in any data using the ‘data’ path. For example, read_csv(\"data/data.csv\")."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  }
]